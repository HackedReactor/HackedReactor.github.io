<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Aniketh V" />


<title>Case Study 2: DDS</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">My Website</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">About Me</a>
</li>
<li>
  <a href="CLT_2.html">CLT</a>
</li>
<li>
  <a href="Beers_And_Brews.html">Beer Study</a>
</li>
<li>
  <a href="Case_Study_Attrition.html">Case Study 2</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Case Study 2: DDS</h1>
<h4 class="author">Aniketh V</h4>
<h4 class="date">4/13/2020</h4>

</div>


<div id="attrition-and-income--frito-lays" class="section level1">
<h1>Attrition and Income- Frito Lays</h1>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>Greetings! Today we will be discussing “Attrition and Income” too check what leads to attrition and income levels for talent management.</p>
</div>
</div>
<div id="setting-up-the-environment" class="section level1">
<h1>Setting up the environment</h1>
<pre class="r"><code>#Loading in the required libraries
library(stringr)
library(dplyr)</code></pre>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre class="r"><code>library(plyr)</code></pre>
<pre><code>## -------------------------------------------------------------------------</code></pre>
<pre><code>## You have loaded plyr after dplyr - this is likely to cause problems.
## If you need functions from both plyr and dplyr, please load plyr first, then dplyr:
## library(plyr); library(dplyr)</code></pre>
<pre><code>## -------------------------------------------------------------------------</code></pre>
<pre><code>## 
## Attaching package: &#39;plyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     arrange, count, desc, failwith, id, mutate, rename, summarise,
##     summarize</code></pre>
<pre class="r"><code>library(magrittr)
library(ggplot2)
library(tidyr)</code></pre>
<pre><code>## 
## Attaching package: &#39;tidyr&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:magrittr&#39;:
## 
##     extract</code></pre>
<pre class="r"><code>library(GGally)</code></pre>
<pre><code>## Registered S3 method overwritten by &#39;GGally&#39;:
##   method from   
##   +.gg   ggplot2</code></pre>
<pre><code>## 
## Attaching package: &#39;GGally&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     nasa</code></pre>
<pre class="r"><code>library(ggalt)</code></pre>
<pre><code>## Registered S3 methods overwritten by &#39;ggalt&#39;:
##   method                  from   
##   grid.draw.absoluteGrob  ggplot2
##   grobHeight.absoluteGrob ggplot2
##   grobWidth.absoluteGrob  ggplot2
##   grobX.absoluteGrob      ggplot2
##   grobY.absoluteGrob      ggplot2</code></pre>
<pre class="r"><code>library(mice)</code></pre>
<pre><code>## 
## Attaching package: &#39;mice&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     cbind, rbind</code></pre>
<pre class="r"><code>library(e1071)
library(class)
library(caret)</code></pre>
<pre><code>## Loading required package: lattice</code></pre>
<pre class="r"><code>library(ggcorrplot)

#Reading in the data
attritionData = read.csv(&quot;/Users/password1234/Documents/Doing_Data_Science/MSDS_6306_Doing-Data-Science/Unit\ 14\ and\ 15\ Case\ Study\ 2/CaseStudy2-data.csv&quot;, header = TRUE)
noAttritionData = read.csv(&quot;/Users/password1234/Documents/Doing_Data_Science/MSDS_6306_Doing-Data-Science/Unit\ 14\ and\ 15\ Case\ Study\ 2/CaseStudy2CompSet\ No\ Attrition.csv&quot;, header = TRUE)
noSalaryData = read.csv(&quot;/Users/password1234/Documents/Doing_Data_Science/MSDS_6306_Doing-Data-Science/Unit\ 14\ and\ 15\ Case\ Study\ 2/CaseStudy2CompSet\ No\ Salary.csv&quot;, header = TRUE)

#Get a look at the summary for the attrition data
summary(attritionData)</code></pre>
<pre><code>##        ID             Age        Attrition           BusinessTravel
##  Min.   :  1.0   Min.   :18.00   No :730   Non-Travel       : 94   
##  1st Qu.:218.2   1st Qu.:30.00   Yes:140   Travel_Frequently:158   
##  Median :435.5   Median :35.00             Travel_Rarely    :618   
##  Mean   :435.5   Mean   :36.83                                     
##  3rd Qu.:652.8   3rd Qu.:43.00                                     
##  Max.   :870.0   Max.   :60.00                                     
##                                                                    
##    DailyRate                       Department  DistanceFromHome
##  Min.   : 103.0   Human Resources       : 35   Min.   : 1.000  
##  1st Qu.: 472.5   Research &amp; Development:562   1st Qu.: 2.000  
##  Median : 817.5   Sales                 :273   Median : 7.000  
##  Mean   : 815.2                                Mean   : 9.339  
##  3rd Qu.:1165.8                                3rd Qu.:14.000  
##  Max.   :1499.0                                Max.   :29.000  
##                                                                
##    Education              EducationField EmployeeCount EmployeeNumber  
##  Min.   :1.000   Human Resources : 15    Min.   :1     Min.   :   1.0  
##  1st Qu.:2.000   Life Sciences   :358    1st Qu.:1     1st Qu.: 477.2  
##  Median :3.000   Marketing       :100    Median :1     Median :1039.0  
##  Mean   :2.901   Medical         :270    Mean   :1     Mean   :1029.8  
##  3rd Qu.:4.000   Other           : 52    3rd Qu.:1     3rd Qu.:1561.5  
##  Max.   :5.000   Technical Degree: 75    Max.   :1     Max.   :2064.0  
##                                                                        
##  EnvironmentSatisfaction    Gender      HourlyRate     JobInvolvement 
##  Min.   :1.000           Female:354   Min.   : 30.00   Min.   :1.000  
##  1st Qu.:2.000           Male  :516   1st Qu.: 48.00   1st Qu.:2.000  
##  Median :3.000                        Median : 66.00   Median :3.000  
##  Mean   :2.701                        Mean   : 65.61   Mean   :2.723  
##  3rd Qu.:4.000                        3rd Qu.: 83.00   3rd Qu.:3.000  
##  Max.   :4.000                        Max.   :100.00   Max.   :4.000  
##                                                                       
##     JobLevel                          JobRole    JobSatisfaction
##  Min.   :1.000   Sales Executive          :200   Min.   :1.000  
##  1st Qu.:1.000   Research Scientist       :172   1st Qu.:2.000  
##  Median :2.000   Laboratory Technician    :153   Median :3.000  
##  Mean   :2.039   Manufacturing Director   : 87   Mean   :2.709  
##  3rd Qu.:3.000   Healthcare Representative: 76   3rd Qu.:4.000  
##  Max.   :5.000   Sales Representative     : 53   Max.   :4.000  
##                  (Other)                  :129                  
##   MaritalStatus MonthlyIncome    MonthlyRate    NumCompaniesWorked Over18 
##  Divorced:191   Min.   : 1081   Min.   : 2094   Min.   :0.000      Y:870  
##  Married :410   1st Qu.: 2840   1st Qu.: 8092   1st Qu.:1.000             
##  Single  :269   Median : 4946   Median :14074   Median :2.000             
##                 Mean   : 6390   Mean   :14326   Mean   :2.728             
##                 3rd Qu.: 8182   3rd Qu.:20456   3rd Qu.:4.000             
##                 Max.   :19999   Max.   :26997   Max.   :9.000             
##                                                                           
##  OverTime  PercentSalaryHike PerformanceRating RelationshipSatisfaction
##  No :618   Min.   :11.0      Min.   :3.000     Min.   :1.000           
##  Yes:252   1st Qu.:12.0      1st Qu.:3.000     1st Qu.:2.000           
##            Median :14.0      Median :3.000     Median :3.000           
##            Mean   :15.2      Mean   :3.152     Mean   :2.707           
##            3rd Qu.:18.0      3rd Qu.:3.000     3rd Qu.:4.000           
##            Max.   :25.0      Max.   :4.000     Max.   :4.000           
##                                                                        
##  StandardHours StockOptionLevel TotalWorkingYears TrainingTimesLastYear
##  Min.   :80    Min.   :0.0000   Min.   : 0.00     Min.   :0.000        
##  1st Qu.:80    1st Qu.:0.0000   1st Qu.: 6.00     1st Qu.:2.000        
##  Median :80    Median :1.0000   Median :10.00     Median :3.000        
##  Mean   :80    Mean   :0.7839   Mean   :11.05     Mean   :2.832        
##  3rd Qu.:80    3rd Qu.:1.0000   3rd Qu.:15.00     3rd Qu.:3.000        
##  Max.   :80    Max.   :3.0000   Max.   :40.00     Max.   :6.000        
##                                                                        
##  WorkLifeBalance YearsAtCompany   YearsInCurrentRole
##  Min.   :1.000   Min.   : 0.000   Min.   : 0.000    
##  1st Qu.:2.000   1st Qu.: 3.000   1st Qu.: 2.000    
##  Median :3.000   Median : 5.000   Median : 3.000    
##  Mean   :2.782   Mean   : 6.962   Mean   : 4.205    
##  3rd Qu.:3.000   3rd Qu.:10.000   3rd Qu.: 7.000    
##  Max.   :4.000   Max.   :40.000   Max.   :18.000    
##                                                     
##  YearsSinceLastPromotion YearsWithCurrManager
##  Min.   : 0.000          Min.   : 0.00       
##  1st Qu.: 0.000          1st Qu.: 2.00       
##  Median : 1.000          Median : 3.00       
##  Mean   : 2.169          Mean   : 4.14       
##  3rd Qu.: 3.000          3rd Qu.: 7.00       
##  Max.   :15.000          Max.   :17.00       
## </code></pre>
<pre class="r"><code>summary(noAttritionData)</code></pre>
<pre><code>##        ID            Age                  BusinessTravel   DailyRate     
##  Min.   :1171   Min.   :19.00   Non-Travel       : 32    Min.   : 102.0  
##  1st Qu.:1246   1st Qu.:31.00   Travel_Frequently: 57    1st Qu.: 448.0  
##  Median :1320   Median :36.00   Travel_Rarely    :211    Median : 775.0  
##  Mean   :1320   Mean   :37.86                            Mean   : 784.8  
##  3rd Qu.:1395   3rd Qu.:44.00                            3rd Qu.:1117.0  
##  Max.   :1470   Max.   :60.00                            Max.   :1490.0  
##                                                                          
##                   Department  DistanceFromHome   Education    
##  Human Resources       : 11   Min.   : 1.00    Min.   :1.000  
##  Research &amp; Development:209   1st Qu.: 2.00    1st Qu.:2.000  
##  Sales                 : 80   Median : 7.00    Median :3.000  
##                               Mean   : 9.26    Mean   :2.973  
##                               3rd Qu.:14.00    3rd Qu.:4.000  
##                               Max.   :29.00    Max.   :5.000  
##                                                               
##           EducationField EmployeeCount EmployeeNumber  
##  Human Resources :  7    Min.   :1     Min.   :   2.0  
##  Life Sciences   :130    1st Qu.:1     1st Qu.: 508.8  
##  Marketing       : 27    Median :1     Median : 994.5  
##  Medical         : 94    Mean   :1     Mean   :1020.9  
##  Other           : 12    3rd Qu.:1     3rd Qu.:1542.5  
##  Technical Degree: 30    Max.   :1     Max.   :2065.0  
##                                                        
##  EnvironmentSatisfaction    Gender      HourlyRate     JobInvolvement 
##  Min.   :1.000           Female:105   Min.   : 30.00   Min.   :1.000  
##  1st Qu.:2.000           Male  :195   1st Qu.: 50.00   1st Qu.:2.000  
##  Median :3.000                        Median : 66.00   Median :3.000  
##  Mean   :2.733                        Mean   : 66.07   Mean   :2.743  
##  3rd Qu.:4.000                        3rd Qu.: 83.00   3rd Qu.:3.000  
##  Max.   :4.000                        Max.   :100.00   Max.   :4.000  
##                                                                       
##     JobLevel                        JobRole   JobSatisfaction
##  Min.   :1.0   Research Scientist       :61   Min.   :1.000  
##  1st Qu.:1.0   Sales Executive          :57   1st Qu.:2.000  
##  Median :2.0   Laboratory Technician    :55   Median :3.000  
##  Mean   :2.2   Manufacturing Director   :31   Mean   :2.767  
##  3rd Qu.:3.0   Manager                  :30   3rd Qu.:4.000  
##  Max.   :5.0   Healthcare Representative:29   Max.   :4.000  
##                (Other)                  :37                  
##   MaritalStatus MonthlyIncome    MonthlyRate    NumCompaniesWorked Over18 
##  Divorced: 65   Min.   : 1232   Min.   : 2097   Min.   :0.000      Y:300  
##  Married :128   1st Qu.: 3034   1st Qu.: 8420   1st Qu.:1.000             
##  Single  :107   Median : 5208   Median :15091   Median :2.000             
##                 Mean   : 7103   Mean   :14499   Mean   :2.547             
##                 3rd Qu.: 9750   3rd Qu.:20330   3rd Qu.:4.000             
##                 Max.   :19973   Max.   :26914   Max.   :9.000             
##                                                                           
##  OverTime  PercentSalaryHike PerformanceRating RelationshipSatisfaction
##  No :212   Min.   :11.00     Min.   :3.000     Min.   :1.000           
##  Yes: 88   1st Qu.:12.00     1st Qu.:3.000     1st Qu.:2.000           
##            Median :14.00     Median :3.000     Median :3.000           
##            Mean   :15.17     Mean   :3.153     Mean   :2.803           
##            3rd Qu.:18.00     3rd Qu.:3.000     3rd Qu.:4.000           
##            Max.   :25.00     Max.   :4.000     Max.   :4.000           
##                                                                        
##  StandardHours StockOptionLevel TotalWorkingYears TrainingTimesLastYear
##  Min.   :80    Min.   :0.0000   Min.   : 0.00     Min.   :0.000        
##  1st Qu.:80    1st Qu.:0.0000   1st Qu.: 6.00     1st Qu.:2.000        
##  Median :80    Median :1.0000   Median :10.00     Median :2.000        
##  Mean   :80    Mean   :0.7833   Mean   :12.44     Mean   :2.683        
##  3rd Qu.:80    3rd Qu.:1.0000   3rd Qu.:18.00     3rd Qu.:3.000        
##  Max.   :80    Max.   :3.0000   Max.   :38.00     Max.   :6.000        
##                                                                        
##  WorkLifeBalance YearsAtCompany   YearsInCurrentRole
##  Min.   :1.000   Min.   : 0.000   Min.   : 0.00     
##  1st Qu.:2.000   1st Qu.: 3.000   1st Qu.: 2.00     
##  Median :3.000   Median : 5.000   Median : 3.00     
##  Mean   :2.747   Mean   : 7.527   Mean   : 4.33     
##  3rd Qu.:3.000   3rd Qu.:10.000   3rd Qu.: 7.00     
##  Max.   :4.000   Max.   :37.000   Max.   :18.00     
##                                                     
##  YearsSinceLastPromotion YearsWithCurrManager
##  Min.   : 0.00           Min.   : 0.00       
##  1st Qu.: 0.00           1st Qu.: 2.00       
##  Median : 1.00           Median : 3.00       
##  Mean   : 2.29           Mean   : 4.38       
##  3rd Qu.: 3.00           3rd Qu.: 7.00       
##  Max.   :15.00           Max.   :17.00       
## </code></pre>
<div id="exploratory-data-analysis" class="section level2">
<h2>Exploratory Data Analysis</h2>
<p>As part of the first step we would like to take a rough look at the data at hand. We want to do some intial analysis to see if anything catches our eye. Additionally, we will take a look at the data types for the variables to see what we are working with.</p>
<p>Couple of quick notes (as per a preliminary analysis): - Standard hours is 80 across the board - Over 18 is also “Y” across the board - Employee count is only 1</p>
<pre class="r"><code>#View the data types for each variable we are dealing with
dplyr::glimpse(attritionData)</code></pre>
<pre><code>## Observations: 870
## Variables: 36
## $ ID                       &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, …
## $ Age                      &lt;int&gt; 32, 40, 35, 32, 24, 27, 41, 37, 34, 34,…
## $ Attrition                &lt;fct&gt; No, No, No, No, No, No, No, No, No, No,…
## $ BusinessTravel           &lt;fct&gt; Travel_Rarely, Travel_Rarely, Travel_Fr…
## $ DailyRate                &lt;int&gt; 117, 1308, 200, 801, 567, 294, 1283, 30…
## $ Department               &lt;fct&gt; Sales, Research &amp; Development, Research…
## $ DistanceFromHome         &lt;int&gt; 13, 14, 18, 1, 2, 10, 5, 10, 10, 10, 6,…
## $ Education                &lt;int&gt; 4, 3, 2, 4, 1, 2, 5, 4, 4, 4, 3, 2, 3, …
## $ EducationField           &lt;fct&gt; Life Sciences, Medical, Life Sciences, …
## $ EmployeeCount            &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
## $ EmployeeNumber           &lt;int&gt; 859, 1128, 1412, 2016, 1646, 733, 1448,…
## $ EnvironmentSatisfaction  &lt;int&gt; 2, 3, 3, 3, 1, 4, 2, 4, 3, 4, 1, 3, 3, …
## $ Gender                   &lt;fct&gt; Male, Male, Male, Female, Female, Male,…
## $ HourlyRate               &lt;int&gt; 73, 44, 60, 48, 32, 32, 90, 88, 87, 92,…
## $ JobInvolvement           &lt;int&gt; 3, 2, 3, 3, 3, 3, 4, 2, 3, 2, 2, 3, 3, …
## $ JobLevel                 &lt;int&gt; 2, 5, 3, 3, 1, 3, 1, 2, 1, 2, 5, 1, 3, …
## $ JobRole                  &lt;fct&gt; Sales Executive, Research Director, Man…
## $ JobSatisfaction          &lt;int&gt; 4, 3, 4, 4, 4, 1, 3, 4, 3, 3, 3, 4, 3, …
## $ MaritalStatus            &lt;fct&gt; Divorced, Single, Single, Married, Sing…
## $ MonthlyIncome            &lt;int&gt; 4403, 19626, 9362, 10422, 3760, 8793, 2…
## $ MonthlyRate              &lt;int&gt; 9250, 17544, 19944, 24032, 17218, 4809,…
## $ NumCompaniesWorked       &lt;int&gt; 2, 1, 2, 1, 1, 1, 2, 2, 1, 1, 7, 1, 3, …
## $ Over18                   &lt;fct&gt; Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, Y, …
## $ OverTime                 &lt;fct&gt; No, No, No, No, Yes, No, Yes, Yes, Yes,…
## $ PercentSalaryHike        &lt;int&gt; 11, 14, 11, 19, 13, 21, 12, 14, 19, 14,…
## $ PerformanceRating        &lt;int&gt; 3, 3, 3, 3, 3, 4, 3, 3, 3, 3, 3, 3, 4, …
## $ RelationshipSatisfaction &lt;int&gt; 3, 1, 3, 3, 3, 3, 1, 3, 4, 2, 4, 2, 2, …
## $ StandardHours            &lt;int&gt; 80, 80, 80, 80, 80, 80, 80, 80, 80, 80,…
## $ StockOptionLevel         &lt;int&gt; 1, 0, 0, 2, 0, 2, 0, 3, 1, 1, 0, 1, 0, …
## $ TotalWorkingYears        &lt;int&gt; 8, 21, 10, 14, 6, 9, 7, 8, 1, 8, 21, 3,…
## $ TrainingTimesLastYear    &lt;int&gt; 3, 2, 2, 3, 2, 4, 5, 5, 2, 3, 2, 2, 3, …
## $ WorkLifeBalance          &lt;int&gt; 2, 4, 3, 3, 3, 2, 2, 3, 3, 2, 3, 3, 4, …
## $ YearsAtCompany           &lt;int&gt; 5, 20, 2, 14, 6, 9, 4, 1, 1, 8, 16, 3, …
## $ YearsInCurrentRole       &lt;int&gt; 2, 7, 2, 10, 3, 7, 2, 0, 1, 2, 12, 2, 5…
## $ YearsSinceLastPromotion  &lt;int&gt; 0, 4, 2, 5, 1, 1, 0, 0, 0, 7, 6, 2, 1, …
## $ YearsWithCurrManager     &lt;int&gt; 3, 9, 2, 7, 3, 7, 3, 0, 0, 7, 14, 2, 6,…</code></pre>
<pre class="r"><code>#Separate the numerical and categorical variables in the dataframe
sapply(attritionData, is.factor)</code></pre>
<pre><code>##                       ID                      Age                Attrition 
##                    FALSE                    FALSE                     TRUE 
##           BusinessTravel                DailyRate               Department 
##                     TRUE                    FALSE                     TRUE 
##         DistanceFromHome                Education           EducationField 
##                    FALSE                    FALSE                     TRUE 
##            EmployeeCount           EmployeeNumber  EnvironmentSatisfaction 
##                    FALSE                    FALSE                    FALSE 
##                   Gender               HourlyRate           JobInvolvement 
##                     TRUE                    FALSE                    FALSE 
##                 JobLevel                  JobRole          JobSatisfaction 
##                    FALSE                     TRUE                    FALSE 
##            MaritalStatus            MonthlyIncome              MonthlyRate 
##                     TRUE                    FALSE                    FALSE 
##       NumCompaniesWorked                   Over18                 OverTime 
##                    FALSE                     TRUE                     TRUE 
##        PercentSalaryHike        PerformanceRating RelationshipSatisfaction 
##                    FALSE                    FALSE                    FALSE 
##            StandardHours         StockOptionLevel        TotalWorkingYears 
##                    FALSE                    FALSE                    FALSE 
##    TrainingTimesLastYear          WorkLifeBalance           YearsAtCompany 
##                    FALSE                    FALSE                    FALSE 
##       YearsInCurrentRole  YearsSinceLastPromotion     YearsWithCurrManager 
##                    FALSE                    FALSE                    FALSE</code></pre>
<pre class="r"><code>#Categorical variables only
categoricalVar = attritionData[,sapply(attritionData, is.factor)] 
summary(categoricalVar)</code></pre>
<pre><code>##  Attrition           BusinessTravel                  Department 
##  No :730   Non-Travel       : 94    Human Resources       : 35  
##  Yes:140   Travel_Frequently:158    Research &amp; Development:562  
##            Travel_Rarely    :618    Sales                 :273  
##                                                                 
##                                                                 
##                                                                 
##                                                                 
##           EducationField    Gender                         JobRole   
##  Human Resources : 15    Female:354   Sales Executive          :200  
##  Life Sciences   :358    Male  :516   Research Scientist       :172  
##  Marketing       :100                 Laboratory Technician    :153  
##  Medical         :270                 Manufacturing Director   : 87  
##  Other           : 52                 Healthcare Representative: 76  
##  Technical Degree: 75                 Sales Representative     : 53  
##                                       (Other)                  :129  
##   MaritalStatus Over18  OverTime 
##  Divorced:191   Y:870   No :618  
##  Married :410           Yes:252  
##  Single  :269                    
##                                  
##                                  
##                                  
## </code></pre>
<pre class="r"><code>#Numerical variables only
numericalVar = attritionData[,!sapply(attritionData, is.factor)]
summary(numericalVar)</code></pre>
<pre><code>##        ID             Age          DailyRate      DistanceFromHome
##  Min.   :  1.0   Min.   :18.00   Min.   : 103.0   Min.   : 1.000  
##  1st Qu.:218.2   1st Qu.:30.00   1st Qu.: 472.5   1st Qu.: 2.000  
##  Median :435.5   Median :35.00   Median : 817.5   Median : 7.000  
##  Mean   :435.5   Mean   :36.83   Mean   : 815.2   Mean   : 9.339  
##  3rd Qu.:652.8   3rd Qu.:43.00   3rd Qu.:1165.8   3rd Qu.:14.000  
##  Max.   :870.0   Max.   :60.00   Max.   :1499.0   Max.   :29.000  
##    Education     EmployeeCount EmployeeNumber   EnvironmentSatisfaction
##  Min.   :1.000   Min.   :1     Min.   :   1.0   Min.   :1.000          
##  1st Qu.:2.000   1st Qu.:1     1st Qu.: 477.2   1st Qu.:2.000          
##  Median :3.000   Median :1     Median :1039.0   Median :3.000          
##  Mean   :2.901   Mean   :1     Mean   :1029.8   Mean   :2.701          
##  3rd Qu.:4.000   3rd Qu.:1     3rd Qu.:1561.5   3rd Qu.:4.000          
##  Max.   :5.000   Max.   :1     Max.   :2064.0   Max.   :4.000          
##    HourlyRate     JobInvolvement     JobLevel     JobSatisfaction
##  Min.   : 30.00   Min.   :1.000   Min.   :1.000   Min.   :1.000  
##  1st Qu.: 48.00   1st Qu.:2.000   1st Qu.:1.000   1st Qu.:2.000  
##  Median : 66.00   Median :3.000   Median :2.000   Median :3.000  
##  Mean   : 65.61   Mean   :2.723   Mean   :2.039   Mean   :2.709  
##  3rd Qu.: 83.00   3rd Qu.:3.000   3rd Qu.:3.000   3rd Qu.:4.000  
##  Max.   :100.00   Max.   :4.000   Max.   :5.000   Max.   :4.000  
##  MonthlyIncome    MonthlyRate    NumCompaniesWorked PercentSalaryHike
##  Min.   : 1081   Min.   : 2094   Min.   :0.000      Min.   :11.0     
##  1st Qu.: 2840   1st Qu.: 8092   1st Qu.:1.000      1st Qu.:12.0     
##  Median : 4946   Median :14074   Median :2.000      Median :14.0     
##  Mean   : 6390   Mean   :14326   Mean   :2.728      Mean   :15.2     
##  3rd Qu.: 8182   3rd Qu.:20456   3rd Qu.:4.000      3rd Qu.:18.0     
##  Max.   :19999   Max.   :26997   Max.   :9.000      Max.   :25.0     
##  PerformanceRating RelationshipSatisfaction StandardHours StockOptionLevel
##  Min.   :3.000     Min.   :1.000            Min.   :80    Min.   :0.0000  
##  1st Qu.:3.000     1st Qu.:2.000            1st Qu.:80    1st Qu.:0.0000  
##  Median :3.000     Median :3.000            Median :80    Median :1.0000  
##  Mean   :3.152     Mean   :2.707            Mean   :80    Mean   :0.7839  
##  3rd Qu.:3.000     3rd Qu.:4.000            3rd Qu.:80    3rd Qu.:1.0000  
##  Max.   :4.000     Max.   :4.000            Max.   :80    Max.   :3.0000  
##  TotalWorkingYears TrainingTimesLastYear WorkLifeBalance YearsAtCompany  
##  Min.   : 0.00     Min.   :0.000         Min.   :1.000   Min.   : 0.000  
##  1st Qu.: 6.00     1st Qu.:2.000         1st Qu.:2.000   1st Qu.: 3.000  
##  Median :10.00     Median :3.000         Median :3.000   Median : 5.000  
##  Mean   :11.05     Mean   :2.832         Mean   :2.782   Mean   : 6.962  
##  3rd Qu.:15.00     3rd Qu.:3.000         3rd Qu.:3.000   3rd Qu.:10.000  
##  Max.   :40.00     Max.   :6.000         Max.   :4.000   Max.   :40.000  
##  YearsInCurrentRole YearsSinceLastPromotion YearsWithCurrManager
##  Min.   : 0.000     Min.   : 0.000          Min.   : 0.00       
##  1st Qu.: 2.000     1st Qu.: 0.000          1st Qu.: 2.00       
##  Median : 3.000     Median : 1.000          Median : 3.00       
##  Mean   : 4.205     Mean   : 2.169          Mean   : 4.14       
##  3rd Qu.: 7.000     3rd Qu.: 3.000          3rd Qu.: 7.00       
##  Max.   :18.000     Max.   :15.000          Max.   :17.00</code></pre>
<pre class="r"><code>#Observing numerical variables that we can use to predict monthly income for linear regression equation.
corr = round(cor(numericalVar), 1)</code></pre>
<pre><code>## Warning in cor(numericalVar): the standard deviation is zero</code></pre>
<pre class="r"><code>ggcorrplot(corr, hc.method = TRUE,
           type = &quot;lower&quot;,
           lab = TRUE,
           lab_size = 3,
           method = &quot;circle&quot;,
           colors = c(&quot;tomato2&quot;, &quot;white&quot;, &quot;springgreen3&quot;),
           title = &quot;Correlogram of Numerical Employee Data&quot;,
           ggtheme = theme_bw)</code></pre>
<p><img src="Case_Study_Attrition_files/figure-html/unnamed-chunk-2-1.png" width="672" /> Looks like there are only 9 categorical variables in the dataset and around 28 for numerical variables. This will mean we would want to do some dummy coding later when we decide the attrition factors.</p>
<p>As per the above correlogram, there seems to be a strong relationship of certain variable intune with Monthly income: - Job Level: Strong correlation at 1 - Age: Moderate correlation at 0.5 - TotalWorkingYears: Strong correlation at 0.8 - YearsAtCompany: Moderate correlation at 0.5</p>
</div>
<div id="finding-attrition-factors" class="section level2">
<h2>Finding Attrition Factors</h2>
<pre class="r"><code>###Lets look at a rough analysis on multiple different columns to see if we can figure something out
attritionData %&gt;% select(MonthlyIncome, Age, TotalWorkingYears, YearsAtCompany, Attrition) %&gt;% ggpairs(mapping = aes(color = Attrition)) + ggtitle(&quot;Monthly Income vs Education, Experience, and Attrition&quot;)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="Case_Study_Attrition_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code>attritionData %&gt;% select(MonthlyIncome, YearsAtCompany, TotalWorkingYears, YearsInCurrentRole, OverTime) %&gt;% ggpairs(mapping = aes(color = OverTime)) + ggtitle(&quot;Monthly Income vs Years in Industry by Overtime&quot;)</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="Case_Study_Attrition_files/figure-html/unnamed-chunk-3-2.png" width="672" /></p>
<pre class="r"><code>#Lets look at if Monthyly income and Job Role play a role in determining Attrition
attritionData %&gt;% ggplot(aes(x = JobRole, y = MonthlyIncome, fill = Attrition)) + geom_bar(stat = &quot;identity&quot;, width = .5) + labs(title = &quot;Income&quot;, subtitle = &quot;along with Attrition&quot;) + theme(axis.text.x = element_text(angle = 65, vjust = 0.6))</code></pre>
<p><img src="Case_Study_Attrition_files/figure-html/unnamed-chunk-3-3.png" width="672" /></p>
<pre class="r"><code>#Plotting monthly income and years at company, color coating by job role
attritionData %&gt;% ggplot(aes(x = MonthlyIncome, y = JobLevel, color = Attrition)) + geom_point(position = &quot;jitter&quot;) + ggtitle(&quot;Monthly Income vs Years at Company&quot;)</code></pre>
<p><img src="Case_Study_Attrition_files/figure-html/unnamed-chunk-3-4.png" width="672" /></p>
<pre class="r"><code>summary(attritionData$Age)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   18.00   30.00   35.00   36.83   43.00   60.00</code></pre>
<pre class="r"><code>#I want to see what relationship age and years since last promotion have with attrition. Does the age and the years since last promotion affect attrition?
attritionData %&gt;% ggplot(aes(x = Age, y = YearsSinceLastPromotion, color = Attrition)) + geom_point(position = &quot;jitter&quot;) + geom_smooth(method = &quot;lm&quot;, se = F) + ggtitle(&quot;Age vs Years at Company colored by Attrition&quot;)</code></pre>
<p><img src="Case_Study_Attrition_files/figure-html/unnamed-chunk-3-5.png" width="672" /></p>
<pre class="r"><code>#Creating an new column with age groups the ages fall under
attritionData = attritionData %&gt;% mutate(ageGroup = case_when(Age &gt;=18 &amp; Age &lt;= 30 ~ &#39;18-30&#39;,
                                         Age &gt;=31 &amp; Age &lt;= 45 ~ &#39;31-45&#39;,
                                         Age &gt;=46 &amp; Age &lt;= 60 ~ &#39;46-60&#39;))
count(attritionData, &quot;ageGroup&quot;)</code></pre>
<pre><code>##   ageGroup freq
## 1    18-30  222
## 2    31-45  491
## 3    46-60  157</code></pre>
<pre class="r"><code>#Tallying the number for Attrition for Yes and No
ageCountFinal = attritionData %&gt;% group_by(Attrition, ageGroup) %&gt;% tally()

#Rounding
ageCountFinal = ageCountFinal %&gt;% mutate(Perc = n/870)
ageCountFinal$Perc = round(ageCountFinal$Perc*100, digits = 3)

#Failed attempt to create a pie chart 
#attritionData %&gt;% ggplot(aes(x = JobRole, y = StockOptionLevel, fill = Attrition)) + geom_bar(stat = &quot;identity&quot;, width = .5) + labs(title = &quot;Stock Option #Level&quot;, subtitle = &quot;By Job Role and colored by Attrition&quot;) + theme(axis.text.x = element_text(angle = 65, vjust = 0.6))</code></pre>
<p>At a glance, it looks like age and years since last promotion do play a big role for turnover/attrition. As per the final graph there seems to be some information that tells us that there are many young people that seem to leave the company. At 0 since years since last promotion, this tells me that they have not been working in the company as long.</p>
<p>Final picks: Age - 6.6% Attrition perc for employees 18-30 - 7.2% Attrition perc for employees 31-45 - 2.3% Attrition perc for employees 45-60 YearSinceLastPromotion - Wild Card, has a mixed bag of attrition rates as per the graph StockOptionLevel - The higher positions, such as researchers and executives have the most stock options and the higher attrition rate per the other job posts - Possibly leave once their portfolio matures at the company, to make a passive income.</p>
</div>
</div>
<div id="interesting-factstrend" class="section level1">
<h1>Interesting Facts/Trend</h1>
<p>There was also an interesting trend that was noticed as something that is interesting. As per the bar chart it looks like the most satisfying job is the Sales Executive Job. Human resources specialists and managers seem to have the lower job satisfaction. There is definitely more men than women that filled some of these roles.</p>
<pre class="r"><code>attritionData %&gt;% ggplot(aes(x = JobRole, y = JobSatisfaction, fill = Gender)) + geom_bar(stat = &quot;identity&quot;, width = .5) + labs(title = &quot;Job Satisfaction by Role&quot;, subtitle = &quot;Which gender has the higher job satisfaction?&quot;) + theme(axis.text.x = element_text(angle = 60, vjust = 0.6))</code></pre>
<p><img src="Case_Study_Attrition_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<div id="attrition---knn" class="section level2">
<h2>Attrition - KNN</h2>
<p>We identified our top three factors to determine Attrition. In this data set the Attrition factors are not proportionate, if you try different combos of variables it is hard to achieve the 60/60 split. The below variables are some that were found to affect attrition and are my pick for top 3. - Age - Stock Option Level - Years since last promotion</p>
<pre class="r"><code>#Filtering out Attrition by Yes and No
atrritionYes = attritionData %&gt;% filter(Attrition == &quot;Yes&quot;)
attritionNo = attritionData %&gt;% filter(Attrition == &quot;No&quot;)

# set.seed(0)
# splitPerc = .70
# trainIndices = sample(1:dim(atrritionYes)[1], round(splitPerc * dim(atrritionYes)[1]))
# train = atrritionYes[trainIndices,]
# test = atrritionYes[-trainIndices,]
# 
# set.seed(6)
# splitPerc = .70
# trainIndices2 = sample(1:dim(attritionNo)[1], round(splitPerc * dim(attritionNo)[1]))
# train1 = attritionNo[trainIndices2,]
# test1 = attritionNo[-trainIndices2,]
# 
# 
# train_final = rbind(train1, train)
# test_final = rbind(test1, test)
# final_data = rbind(train,train1,test, test1)
# oneTime = rbind(train_final, test_final)
# 
# set.seed(0)
# splitPerc = .70
# trainIndices3 = sample(1:dim(attritionData)[1], round(splitPerc * dim(attritionData)[1]))
# train3 = attritionData[trainIndices3,]
# test3 = attritionData[-trainIndices3,]


#Need to dummy code Business Travel, if needed later. Its one of the categories that I believed plays a role in attrition. It will be needed later on if we decide to test out different combonations.
attritionData$Travel_Num = str_replace(attritionData$BusinessTravel, &quot;Travel_Rarely&quot;, &quot;1&quot;)
attritionData$Travel_Num = str_replace(attritionData$Travel_Num, &quot;Travel_Frequently&quot;, &quot;2&quot;)
attritionData$Travel_Num = str_replace(attritionData$Travel_Num, &quot;Non-Travel&quot;, &quot;0&quot;)
attritionData$Travel_Num = as.integer(attritionData$Travel_Num)

#Use later for test data
noAttr = noAttritionData %&gt;% select(ID, Age, StockOptionLevel, YearsSinceLastPromotion)
#Lets do KNN
case = attritionData %&gt;% select(ID, Age, StockOptionLevel, YearsSinceLastPromotion, Attrition) %&gt;% group_by(ID)
#For predicting our classification to the competition set.
attr_pred = knn(case[,c(2,3,4)], noAttr[,c(2,3,4)], case$Attrition, k = 13, prob = TRUE)
noAttr$Attrition = attr_pred
confusionMatrix(table(attr_pred, noAttr$Attrition))</code></pre>
<pre><code>## Confusion Matrix and Statistics
## 
##          
## attr_pred  No Yes
##       No  293   0
##       Yes   0   7
##                                      
##                Accuracy : 1          
##                  95% CI : (0.9878, 1)
##     No Information Rate : 0.9767     
##     P-Value [Acc &gt; NIR] : 0.0008393  
##                                      
##                   Kappa : 1          
##                                      
##  Mcnemar&#39;s Test P-Value : NA         
##                                      
##             Sensitivity : 1.0000     
##             Specificity : 1.0000     
##          Pos Pred Value : 1.0000     
##          Neg Pred Value : 1.0000     
##              Prevalence : 0.9767     
##          Detection Rate : 0.9767     
##    Detection Prevalence : 0.9767     
##       Balanced Accuracy : 1.0000     
##                                      
##        &#39;Positive&#39; Class : No         
## </code></pre>
<pre class="r"><code>predictionsAttrition = noAttr %&gt;% select(ID, Attrition)

#writing to csv
#write.csv(predictionsAttrition, file = &quot;Case2PredictionsClassifyVankina Attrtion.csv&quot;)


#Train Data and Test Set
set.seed(6)
splitPerc = .70
trainIndices = sample(1:dim(case)[1], round(splitPerc * dim(case)[1]))
train = case[trainIndices,]
test = case[-trainIndices,]

#K = 3
classifications = knn(train[,2:4], test[,2:4], train$Attrition, k = 3, prob = TRUE)
table(test$Attrition, classifications)</code></pre>
<pre><code>##      classifications
##        No Yes
##   No  212   6
##   Yes  39   4</code></pre>
<pre class="r"><code>confusionMatrix(table(test$Attrition, classifications))</code></pre>
<pre><code>## Confusion Matrix and Statistics
## 
##      classifications
##        No Yes
##   No  212   6
##   Yes  39   4
##                                           
##                Accuracy : 0.8276          
##                  95% CI : (0.7762, 0.8714)
##     No Information Rate : 0.9617          
##     P-Value [Acc &gt; NIR] : 1               
##                                           
##                   Kappa : 0.0947          
##                                           
##  Mcnemar&#39;s Test P-Value : 1.84e-06        
##                                           
##             Sensitivity : 0.84462         
##             Specificity : 0.40000         
##          Pos Pred Value : 0.97248         
##          Neg Pred Value : 0.09302         
##              Prevalence : 0.96169         
##          Detection Rate : 0.81226         
##    Detection Prevalence : 0.83525         
##       Balanced Accuracy : 0.62231         
##                                           
##        &#39;Positive&#39; Class : No              
## </code></pre>
<pre class="r"><code>#k = 13
classifications = knn(train[,2:4], test[,2:4], train$Attrition, k = 13, prob = TRUE)
table(test$Attrition, classifications)</code></pre>
<pre><code>##      classifications
##        No Yes
##   No  216   2
##   Yes  39   4</code></pre>
<pre class="r"><code>confusionMatrix(table(test$Attrition, classifications))</code></pre>
<pre><code>## Confusion Matrix and Statistics
## 
##      classifications
##        No Yes
##   No  216   2
##   Yes  39   4
##                                          
##                Accuracy : 0.8429         
##                  95% CI : (0.793, 0.8849)
##     No Information Rate : 0.977          
##     P-Value [Acc &gt; NIR] : 1              
##                                          
##                   Kappa : 0.1281         
##                                          
##  Mcnemar&#39;s Test P-Value : 1.885e-08      
##                                          
##             Sensitivity : 0.84706        
##             Specificity : 0.66667        
##          Pos Pred Value : 0.99083        
##          Neg Pred Value : 0.09302        
##              Prevalence : 0.97701        
##          Detection Rate : 0.82759        
##    Detection Prevalence : 0.83525        
##       Balanced Accuracy : 0.75686        
##                                          
##        &#39;Positive&#39; Class : No             
## </code></pre>
<pre class="r"><code>#k=23
classifications = knn(train[,2:4], test[,2:4], train$Attrition, k = 19, prob = TRUE)
table(test$Attrition, classifications)</code></pre>
<pre><code>##      classifications
##        No Yes
##   No  216   2
##   Yes  39   4</code></pre>
<pre class="r"><code>confusionMatrix(table(test$Attrition, classifications))</code></pre>
<pre><code>## Confusion Matrix and Statistics
## 
##      classifications
##        No Yes
##   No  216   2
##   Yes  39   4
##                                          
##                Accuracy : 0.8429         
##                  95% CI : (0.793, 0.8849)
##     No Information Rate : 0.977          
##     P-Value [Acc &gt; NIR] : 1              
##                                          
##                   Kappa : 0.1281         
##                                          
##  Mcnemar&#39;s Test P-Value : 1.885e-08      
##                                          
##             Sensitivity : 0.84706        
##             Specificity : 0.66667        
##          Pos Pred Value : 0.99083        
##          Neg Pred Value : 0.09302        
##              Prevalence : 0.97701        
##          Detection Rate : 0.82759        
##    Detection Prevalence : 0.83525        
##       Balanced Accuracy : 0.75686        
##                                          
##        &#39;Positive&#39; Class : No             
## </code></pre>
<pre class="r"><code>#Now going to loop through more than one k and find the average
iterations = 100
set.seed(6)
numks = 30
masterAcc = matrix(nrow = iterations, ncol = numks)
kkk = c()
Sens = c()
Spec = c()
  
for(j in 1:iterations)
{
trainIndices = sample(1:dim(case)[1], round(splitPerc * dim(case)[1]))
train = case[trainIndices,]
test = case[-trainIndices,]
for(i in 1:numks)
  {
    classifications = knn(train[,2:4], test[,2:4], train$Attrition, prob = TRUE, k = i)
    table(test$Attrition, classifications)
    CM = confusionMatrix(table(test$Attrition, classifications))
    masterAcc[j,i] = CM$overall[1]
    kkk[i] = CM$overall[1]
    Sens[i] = CM$byClass[1]
    Spec[i] = CM$byClass[2]
  }
}
MeanAcc = colMeans(masterAcc)
plot(seq(1,numks,1),MeanAcc, type = &quot;l&quot;)</code></pre>
<p><img src="Case_Study_Attrition_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code>combo = data_frame(k = 1:30,Sensitivity = Sens, Specificity = Spec, MeanAcc)</code></pre>
<pre><code>## Warning: `data_frame()` is deprecated, use `tibble()`.
## This warning is displayed once per session.</code></pre>
<pre class="r"><code>mean(combo$MeanAcc[1:26])</code></pre>
<pre><code>## [1] 0.8350958</code></pre>
<pre class="r"><code>mean(combo$Specificity[1:18])</code></pre>
<pre><code>## [1] 0.653385</code></pre>
<pre class="r"><code>mean(combo$Sensitivity[1:26])</code></pre>
<pre><code>## [1] 0.8637354</code></pre>
<p>As per the above data we reached the criteria to hit a 60/60 split. This is after 500 iterations of different samples taken from the dimension of the data set. The data frame was broken down to include just the three target variables that we found to affect attrition. Depending on the random samples taken we seem to hit different specificity rates at different times. Sometime we have a 80/80 split and sometimes it goes lower to 80/60. The best value for K that has the best acc/sens/spec falls around 13-19 for that reason selected a K- value at 15 to predict the competition set.</p>
</div>
<div id="monthly-income-linear-regression" class="section level2">
<h2>Monthly Income Linear Regression</h2>
<p>As per the intial analysis and EDA, we have what we need to create a linear regression model that would give us the best prediction for monthly salary. To reiterate the following independent variables were chosen to be represented in the model to predict monthly income: - Total Working Years - Age - Years at Company - Job Level</p>
<pre class="r"><code>#linear models for Salaries (on attrition data before the split)
#Pre-liminary models
reg = lm(MonthlyIncome~Education, attritionData)
reg2 = lm(MonthlyIncome~TotalWorkingYears, attritionData)
#Main Model
mReg = lm(MonthlyIncome~TotalWorkingYears + Age + YearsAtCompany + JobLevel, attritionData)

#Test with just two observations
df = data.frame(TotalWorkingYears = 10, Education = 4)
#Create new Data Frame with just experience and education to predict salary for each person
EduTotal = noSalaryData %&gt;% select(ID,TotalWorkingYears, Age, YearsAtCompany, JobLevel)
#Prediction
pred2 = predict(mReg, newdata = EduTotal)

#Residual Sum of Squares
RSS = c(crossprod(mReg$residuals))
#Mean Squared Error
MSE = RSS / length(mReg$residuals)
#Root MSE
RMSE = sqrt(MSE)


#New Column with Preds
EduTotal$MonthlySalary = pred2
EduTotal$MonthlySalary = as.integer(EduTotal$MonthlySalary)

Final_CSV_Linear = EduTotal %&gt;% select(ID, MonthlySalary)

#Writing predictions to CSV
#write.csv(Final_CSV_Linear, file = &quot;Case2PredictionsVankina Salary.csv&quot;)

#Validation Set
vReg = lm(MonthlySalary~TotalWorkingYears + Age + YearsAtCompany + JobLevel, EduTotal)
vReg</code></pre>
<pre><code>## 
## Call:
## lm(formula = MonthlySalary ~ TotalWorkingYears + Age + YearsAtCompany + 
##     JobLevel, data = EduTotal)
## 
## Coefficients:
##       (Intercept)  TotalWorkingYears                Age  
##         -1697.428             73.062             -2.319  
##    YearsAtCompany           JobLevel  
##           -32.749           3723.760</code></pre>
<pre class="r"><code>confint(vReg)</code></pre>
<pre><code>##                          2.5 %       97.5 %
## (Intercept)       -1697.584053 -1697.272927
## TotalWorkingYears    73.053027    73.070262
## Age                  -2.323776    -2.313696
## YearsAtCompany      -32.757138   -32.741384
## JobLevel           3723.708314  3723.811082</code></pre>
<pre class="r"><code>#Residual Sum of Squares
RSS_V = c(crossprod(vReg$residuals))
#Mean Squared Error
MSE_V = RSS_V / length(vReg$residuals)
#Root MSE
RMSE_V = sqrt(MSE_V)</code></pre>
<p>We get a final RMSE of 1379.26 for our model. This meets the requirement for the RMSE &lt; 3000. As you can see it makes some good predictions. Of course adding some more variables that had some correlation is beneficial, but from further research it would not have made as much of a difference.</p>
</div>
<div id="conclusion" class="section level2">
<h2>Conclusion</h2>
<p>To conclude, the data set itself was a little bit difficult to work with. There were far more numerical variable then there were categorical variables. From the initial analysis we found the variables that we needed to test attrition and monthly salary. Predicting the salary was straightforward as there is many correlation for montly income and other variables the can be used to predict income. We also found some interesting information and trends within this data. Attrition was a little bit difficult to classify correctly, as the attrition data not proportional. There was far less turnover/attrition in the company, which made classification difficult but not impossible. Overall we achieved the following: RMSE &lt; 3000 60/60 Sensitivity and Specificity rate for Attrition.</p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
